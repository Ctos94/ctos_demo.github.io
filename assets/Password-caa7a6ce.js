import{k as a,r as e,l,c as s,w as r,a as t,o,b as u,h as d,n,A as i,M as v}from"./index-de9476e1.js";import{S as m}from"./sm-d290443d.js";const p={__name:"Password",setup(p){const c=a(),f=e(null),w=e(!1),b=e({password:"",confirm:""});l((()=>{c.commit("update_sider_active","/user/password")}));const _=async()=>{const{valid:a}=await f.value.validate();a&&(w.value=!0,n.put({url:i.user.password,data:{password:m(b.value.confirm)}}).then((()=>{v.success("修改成功"),f.value.reset()})).finally((()=>{w.value=!1})))},h=a=>a.length<6||a.length>18?"长度6-18位":!!/(?!^(\d+|[a-zA-Z]+)$)^[a-zA-Z0-9]{6,}$/.test(a)||"必须是数字和字母",y=a=>a===b.value.password||"两次输入密码不一致!";return(a,e)=>{const l=t("v-text-field"),n=t("v-btn"),i=t("v-form"),v=t("v-container");return o(),s(v,null,{default:r((()=>[u(i,{ref_key:"formRef",ref:f,style:{width:"300px"},onSubmit:e[2]||(e[2]=d((()=>{}),["prevent"]))},{default:r((()=>[u(l,{modelValue:b.value.password,"onUpdate:modelValue":e[0]||(e[0]=a=>b.value.password=a),rules:[a.$validator.required,h],type:"password",variant:"underlined","validate-on":"blur",label:"新密码"},null,8,["modelValue","rules"]),u(l,{modelValue:b.value.confirm,"onUpdate:modelValue":e[1]||(e[1]=a=>b.value.confirm=a),rules:[a.$validator.required,y],type:"password",variant:"underlined","validate-on":"blur",label:"确认密码"},null,8,["modelValue","rules"]),u(n,{class:"mt-2",color:"blue-lighten-1",disabled:w.value,loading:w.value,onClick:_,text:"保存"},null,8,["disabled","loading"])])),_:1},512)])),_:1})}}};export{p as default};
